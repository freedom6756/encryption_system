<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>解密端</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/decryption.css') }}">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="{{ url_for('static', filename='js/decryption.js') }}" defer></script>
</head>
<body>

<div class="container mt-5">
    <h2 class="text-center">解密端</h2>

    <button id="start-socket-btn" class="btn btn-danger">启动 Socket 服务</button>

    <div id="decryption-private-key-section" class="form-group mt-3" style="display: none;">
        <label for="decryption-private-key">输入解密端私钥</label>
        <input type="number" class="form-control" id="decryption-private-key" placeholder="请输入解密端私钥">
        <button id="submit-private-key" class="btn btn-danger">提交解密端私钥</button>
    </div>

    <label for="shared_key">共享密钥</label>
    <input type="text" class="form-control" id="shared_key" name="shared_key" placeholder="输入共享密钥" readonly>

    <div class="form-group mt-3">
        <label for="decryption-algorithm">选择解密算法</label>
        <select class="form-control" id="decryption-algorithm" name="decryption_algorithm">
            <option value="AES">AES</option>
            <option value="RSA">RSA</option>
            <option value="RC4">RC4</option>
        </select>
    </div>

    <div class="form-group mt-3">
        <label for="ciphertext-input">输入密文</label>
        <textarea class="form-control" id="ciphertext-input" rows="4"></textarea>
    </div>

    <div class="form-group mt-3">
        <label for="file-upload">选择文件</label>
        <input type="file" class="form-control" id="file-upload" name="file-upload-decrypt" onchange="handleFileUpload(event)">
    </div>

    <button type="button" id="decrypt-button" class="btn btn-primary mt-3">解密</button>

    <div id="decrypt-output">
        <label for="output">解密结果</label>
        <textarea class="form-control" id="output" rows="8" readonly></textarea>
    </div>

    <button id="save-file-btn" class="btn btn-success mt-3">保存为文件</button>
    <div id="file-list" class="mt-3">
        <h5>传输的文件列表</h5>
        <ul id="file-list-ul"></ul>
    </div>

    <button id="refresh-btn" class="btn btn-info mt-3">刷新文件列表</button>
    <button id="back-home-btn" class="btn btn-secondary mt-3">返回主页面</button>
</div>

</body>
</html>
